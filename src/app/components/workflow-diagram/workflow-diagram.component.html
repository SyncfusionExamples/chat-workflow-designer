<div class="main-content-wrapper">
  <ejs-diagram class="diagram-container" #diagram  id="diagram"
  [width]="'100%'"
  [height]="649"
  [nodes]="nodes"
  [connectors]="connectors"
  [layout]="layout"
  [getNodeDefaults]="getNodeDefaults"
  [getConnectorDefaults]="getConnectorDefaults"
  (created)="onDiagramCreated()"
  [selectedItems]="selectedItems" (onUserHandleMouseDown)="onUserHandleMouseDown($event)" (click)="onNodeClick($event)"
  [snapSettings]="snapSettings"
  >
    <ng-template #userHandleTemplate >
      <div class="dropDown-container">
        <button #dropdownbutton id="dropdownbutton" ejs-dropdownbutton  target="#listview" (open)="onOpenDropDownButton($event)" iconCss='e-icons e-plus' cssClass='e-caret-hide' (beforeClose)="onBeforeCloseDropDownButton($event)" (beforeOpen)="onBeforeOpenDropDownButton()"></button>
      </div>
    </ng-template>
  </ejs-diagram>

  <ejs-listview #listview id='listview' [dataSource]='listdata' [fields]='fields' [showHeader]='true' [headerTitle]='headertitle' [animation]='animation' (select)="onSelectListView($event)"></ejs-listview>
</div>

<ejs-sidebar id="default-sidebar" #sidebar [type]='type' (created)="onSideBarCreated($event)" style="visibility: hidden" [width]="width" [showBackdrop]="true" target=".main-content-wrapper" [closeOnDocumentClick]="closeOnDocumentClick">
  <div class="title sidebar-header">{{sidebarHeader}}</div>
  <div class="content">
      <!-- Place sidebar content here -->
       <form (ngSubmit)="onFormSubmit()"  class="full-size-form">
        <div class="form-header">
          {{sidebarHeader}}
        </div>
          @if (nodeType == 'Boolean') {
              <div class="content boolean-controls">
              <input type="text" [(ngModel)]="sidebarInput" name="question" placeholder="Enter question..." class="description-box" required/>
              <span>
                <button type="button" ejs-button class="e-btn yes-btn">Yes</button>
                <button type="button" ejs-button class="e-btn no-btn">No</button>
              </span>
            </div>
          }

          @if (nodeType == 'Buttons') {
            <input type="text" [(ngModel)]="sidebarInput" name="question" placeholder="Enter your question..." class="description-box" required/>

            <div class="button-list">
              <div *ngFor="let button of buttons; let i = index" class="button-item">
                <button ejs-button cssClass="e-primary" style="width: 75%;">{{button.label}}</button>
                <button ejs-button type="button" cssClass="e-danger remove-icon" (click)="removeButton(i)">âœ–</button>
              </div>
            </div>

            <div class="add-button-form">
              <div>
                <input #buttonLabel type="text" placeholder="Button Label" class="button-input" />
              </div>
              <div>
                <input #buttonValue type="text" placeholder="Button Value" class="button-input" />
              </div>
              <div>
                <button type="button" style="width: 100%;" (click)="addButton(buttonLabel.value, buttonValue.value, buttonLabel, buttonValue)" class="e-btn">Add Option</button>
              </div>
            </div>
          }
       </form>      
  </div>
  <div class="center-align">
      <button ejs-button id="close" (click)="onCloseSideBarClick()" class="e-btn close-btn">Save & Close</button>
  </div>
</ejs-sidebar>
